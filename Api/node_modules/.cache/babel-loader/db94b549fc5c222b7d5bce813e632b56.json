{"ast":null,"code":"import _classCallCheck from \"D:\\\\Doranco\\\\Node.js\\\\Projets\\\\RestApi\\\\Api\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Doranco\\\\Node.js\\\\Projets\\\\RestApi\\\\Api\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Doranco\\\\Node.js\\\\Projets\\\\RestApi\\\\Api\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Doranco\\\\Node.js\\\\Projets\\\\RestApi\\\\Api\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Doranco\\\\Node.js\\\\Projets\\\\RestApi\\\\Api\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Doranco\\\\Node.js\\\\Projets\\\\RestApi\\\\Api\\\\src\\\\App.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport Layout from './components/Layout/Layout';\nimport Backdrop from './components/Backdrop/Backdrop';\nimport Toolbar from './components/Toolbar/Toolbar';\nimport MainNavigation from './components/Navigation/MainNavigation/MainNavigation';\nimport MobileNavigation from './components/Navigation/MobileNavigation/MobileNavigation';\nimport ErrorHandler from './components/ErrorHandler/ErrorHandler';\nimport FeedPage from './pages/Feed/Feed';\nimport SinglePostPage from './pages/Feed/SinglePost/SinglePost';\nimport LoginPage from './pages/Auth/Login';\nimport SignupPage from './pages/Auth/Signup';\nimport './App.css';\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      showBackdrop: false,\n      showMobileNav: false,\n      isAuth: false,\n      token: null,\n      userId: null,\n      authLoading: false,\n      error: null\n    };\n\n    _this.mobileNavHandler = function (isOpen) {\n      _this.setState({\n        showMobileNav: isOpen,\n        showBackdrop: isOpen\n      });\n    };\n\n    _this.backdropClickHandler = function () {\n      _this.setState({\n        showBackdrop: false,\n        showMobileNav: false,\n        error: null\n      });\n    };\n\n    _this.logoutHandler = function () {\n      _this.setState({\n        isAuth: false,\n        token: null\n      });\n\n      localStorage.removeItem('token');\n      localStorage.removeItem('expiryDate');\n      localStorage.removeItem('userId');\n    };\n\n    _this.loginHandler = function (event, authData) {\n      event.preventDefault();\n      var graphqlQuery = {\n        query: \"\\n      {\\n        login(email: \\\"\".concat(authData.email, \"\\\", password: \\\"\").concat(authData.password, \"\\\") {\\n          userId\\n          token\\n          \\n      }\\n      \")\n      };\n\n      _this.setState({\n        authLoading: true\n      });\n\n      fetch('http://localhost:8080/graphql', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(graphqlQuery)\n      }).then(function (res) {\n        if (res.status === 422) {\n          throw new Error('Validation failed.');\n        }\n\n        if (res.status !== 200 && res.status !== 201) {\n          console.log('Error!');\n          throw new Error('Could not authenticate you!');\n        }\n\n        return res.json();\n      }).then(function (resData) {\n        console.log(resData);\n\n        _this.setState({\n          isAuth: true,\n          token: resData.token,\n          authLoading: false,\n          userId: resData.userId\n        });\n\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        var remainingMilliseconds = 60 * 60 * 1000;\n        var expiryDate = new Date(new Date().getTime() + remainingMilliseconds);\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n\n        _this.setAutoLogout(remainingMilliseconds);\n      }).catch(function (err) {\n        console.log(err);\n\n        _this.setState({\n          isAuth: false,\n          authLoading: false,\n          error: err\n        });\n      });\n    };\n\n    _this.signupHandler = function (event, authData) {\n      event.preventDefault();\n\n      _this.setState({\n        authLoading: true\n      });\n\n      var graphqlQuery = {\n        query: \"\\n        mutation {\\n          createUser(userInput: {email: \\\"\".concat(authData.signupForm.email.value, \"\\\", name: \\\"\").concat(authData.signupForm.name.value, \"\\\", password: \\\"\").concat(authData.signupForm.password.value, \"\\\"}) {\\n            _id\\n            email\\n          }\\n        }\\n      \")\n      };\n      fetch('http://localhost:8080/graphql', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(graphqlQuery)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        if (resData.errors && resData.errors[0].status === 422) {\n          throw new Error('Validation failed. Make sure the email address isnt used yet!');\n        }\n\n        if (resData.errors) {\n          throw new Error('User creation failed!');\n        }\n\n        console.log('resdata dans App.js front', resData);\n\n        _this.setState({\n          isAuth: false,\n          authLoading: false\n        });\n\n        _this.props.history.replace('/');\n      }).catch(function (err) {\n        console.log(err);\n\n        _this.setState({\n          isAuth: false,\n          authLoading: false,\n          error: err\n        });\n      });\n    };\n\n    _this.setAutoLogout = function (milliseconds) {\n      setTimeout(function () {\n        _this.logoutHandler();\n      }, milliseconds);\n    };\n\n    _this.errorHandler = function () {\n      _this.setState({\n        error: null\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var token = localStorage.getItem('token');\n      var expiryDate = localStorage.getItem('expiryDate');\n\n      if (!token || !expiryDate) {\n        return;\n      }\n\n      if (new Date(expiryDate) <= new Date()) {\n        this.logoutHandler();\n        return;\n      }\n\n      var userId = localStorage.getItem('userId');\n      var remainingMilliseconds = new Date(expiryDate).getTime() - new Date().getTime();\n      this.setState({\n        isAuth: true,\n        token: token,\n        userId: userId\n      });\n      this.setAutoLogout(remainingMilliseconds);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var routes = /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        path: \"/\",\n        exact: true,\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(LoginPage, Object.assign({}, props, {\n            onLogin: _this2.loginHandler,\n            loading: _this2.state.authLoading,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 13\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/signup\",\n        exact: true,\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(SignupPage, Object.assign({}, props, {\n            onSignup: _this2.signupHandler,\n            loading: _this2.state.authLoading,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 13\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 9\n        }\n      }));\n\n      if (this.state.isAuth) {\n        routes = /*#__PURE__*/React.createElement(Switch, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Route, {\n          path: \"/\",\n          exact: true,\n          render: function render(props) {\n            return /*#__PURE__*/React.createElement(FeedPage, {\n              userId: _this2.state.userId,\n              token: _this2.state.token,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 15\n              }\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(Route, {\n          path: \"/:postId\",\n          render: function render(props) {\n            return /*#__PURE__*/React.createElement(SinglePostPage, Object.assign({}, props, {\n              userId: _this2.state.userId,\n              token: _this2.state.token,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 15\n              }\n            }));\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 11\n          }\n        }));\n      }\n\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 7\n        }\n      }, this.state.showBackdrop && /*#__PURE__*/React.createElement(Backdrop, {\n        onClick: this.backdropClickHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(ErrorHandler, {\n        error: this.state.error,\n        onHandle: this.errorHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Layout, {\n        header: /*#__PURE__*/React.createElement(Toolbar, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(MainNavigation, {\n          onOpenMobileNav: this.mobileNavHandler.bind(this, true),\n          onLogout: this.logoutHandler,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }\n        })),\n        mobileNav: /*#__PURE__*/React.createElement(MobileNavigation, {\n          open: this.state.showMobileNav,\n          mobile: true,\n          onChooseItem: this.mobileNavHandler.bind(this, false),\n          onLogout: this.logoutHandler,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 9\n        }\n      }), routes);\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(App);","map":{"version":3,"names":["React","Component","Fragment","Route","Switch","Redirect","withRouter","Layout","Backdrop","Toolbar","MainNavigation","MobileNavigation","ErrorHandler","FeedPage","SinglePostPage","LoginPage","SignupPage","App","state","showBackdrop","showMobileNav","isAuth","token","userId","authLoading","error","mobileNavHandler","isOpen","setState","backdropClickHandler","logoutHandler","localStorage","removeItem","loginHandler","event","authData","preventDefault","graphqlQuery","query","email","password","fetch","method","headers","body","JSON","stringify","then","res","status","Error","console","log","json","resData","setItem","remainingMilliseconds","expiryDate","Date","getTime","toISOString","setAutoLogout","catch","err","signupHandler","signupForm","value","name","errors","props","history","replace","milliseconds","setTimeout","errorHandler","getItem","routes","bind"],"sources":["D:/Doranco/Node.js/Projets/RestApi/Api/src/App.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\n\nimport Layout from './components/Layout/Layout';\nimport Backdrop from './components/Backdrop/Backdrop';\nimport Toolbar from './components/Toolbar/Toolbar';\nimport MainNavigation from './components/Navigation/MainNavigation/MainNavigation';\nimport MobileNavigation from './components/Navigation/MobileNavigation/MobileNavigation';\nimport ErrorHandler from './components/ErrorHandler/ErrorHandler';\nimport FeedPage from './pages/Feed/Feed';\nimport SinglePostPage from './pages/Feed/SinglePost/SinglePost';\nimport LoginPage from './pages/Auth/Login';\nimport SignupPage from './pages/Auth/Signup';\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    showBackdrop: false,\n    showMobileNav: false,\n    isAuth: false,\n    token: null,\n    userId: null,\n    authLoading: false,\n    error: null\n  };\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    const expiryDate = localStorage.getItem('expiryDate');\n    if (!token || !expiryDate) {\n      return;\n    }\n    if (new Date(expiryDate) <= new Date()) {\n      this.logoutHandler();\n      return;\n    }\n    const userId = localStorage.getItem('userId');\n    const remainingMilliseconds =\n      new Date(expiryDate).getTime() - new Date().getTime();\n    this.setState({ isAuth: true, token: token, userId: userId });\n    this.setAutoLogout(remainingMilliseconds);\n  }\n\n  mobileNavHandler = isOpen => {\n    this.setState({ showMobileNav: isOpen, showBackdrop: isOpen });\n  };\n\n  backdropClickHandler = () => {\n    this.setState({ showBackdrop: false, showMobileNav: false, error: null });\n  };\n\n  logoutHandler = () => {\n    this.setState({ isAuth: false, token: null });\n    localStorage.removeItem('token');\n    localStorage.removeItem('expiryDate');\n    localStorage.removeItem('userId');\n  };\n\n  loginHandler = (event, authData) => {\n    event.preventDefault();\n    const graphqlQuery = {\n      query: `\n      {\n        login(email: \"${authData.email}\", password: \"${authData.password}\") {\n          userId\n          token\n          \n      }\n      `\n    }\n\n    this.setState({ authLoading: true });\n    fetch('http://localhost:8080/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(\n        graphqlQuery\n      )\n    })\n      .then(res => {\n        if (res.status === 422) {\n          throw new Error('Validation failed.');\n        }\n        if (res.status !== 200 && res.status !== 201) {\n          console.log('Error!');\n          throw new Error('Could not authenticate you!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.setState({\n          isAuth: true,\n          token: resData.token,\n          authLoading: false,\n          userId: resData.userId\n        });\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        const remainingMilliseconds = 60 * 60 * 1000;\n        const expiryDate = new Date(\n          new Date().getTime() + remainingMilliseconds\n        );\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n        this.setAutoLogout(remainingMilliseconds);\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          isAuth: false,\n          authLoading: false,\n          error: err\n        });\n      });\n  };\n\n  signupHandler = (event, authData) => {\n    event.preventDefault();\n    this.setState({ authLoading: true });\n    const graphqlQuery = {\n      query: `\n        mutation {\n          createUser(userInput: {email: \"${authData.signupForm.email.value}\", name: \"${authData.signupForm.name.value}\", password: \"${authData.signupForm.password.value}\"}) {\n            _id\n            email\n          }\n        }\n      `\n    };\n    fetch('http://localhost:8080/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(graphqlQuery)\n    })\n      .then(res => {\n        return res.json();\n      })\n      .then(resData => {\n        if (resData.errors && resData.errors[0].status === 422) {\n          throw new Error('Validation failed. Make sure the email address isnt used yet!');\n        }\n        if (resData.errors) {\n          throw new Error('User creation failed!');\n          \n        }\n        console.log('resdata dans App.js front', resData);\n        this.setState({ isAuth: false, authLoading: false });\n        this.props.history.replace('/');\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          isAuth: false,\n          authLoading: false,\n          error: err\n        });\n      });\n  };\n\n  setAutoLogout = milliseconds => {\n    setTimeout(() => {\n      this.logoutHandler();\n    }, milliseconds);\n  };\n\n  errorHandler = () => {\n    this.setState({ error: null });\n  };\n\n  render() {\n    let routes = (\n      <Switch>\n        <Route\n          path=\"/\"\n          exact\n          render={props => (\n            <LoginPage\n              {...props}\n              onLogin={this.loginHandler}\n              loading={this.state.authLoading}\n            />\n          )}\n        />\n        <Route\n          path=\"/signup\"\n          exact\n          render={props => (\n            <SignupPage\n              {...props}\n              onSignup={this.signupHandler}\n              loading={this.state.authLoading}\n            />\n          )}\n        />\n        <Redirect to=\"/\" />\n      </Switch>\n    );\n    if (this.state.isAuth) {\n      routes = (\n        <Switch>\n          <Route\n            path=\"/\"\n            exact\n            render={props => (\n              <FeedPage userId={this.state.userId} token={this.state.token} />\n            )}\n          />\n          <Route\n            path=\"/:postId\"\n            render={props => (\n              <SinglePostPage\n                {...props}\n                userId={this.state.userId}\n                token={this.state.token}\n              />\n            )}\n          />\n          <Redirect to=\"/\" />\n        </Switch>\n      );\n    }\n    return (\n      <Fragment>\n        {this.state.showBackdrop && (\n          <Backdrop onClick={this.backdropClickHandler} />\n        )}\n        <ErrorHandler error={this.state.error} onHandle={this.errorHandler} />\n        <Layout\n          header={\n            <Toolbar>\n              <MainNavigation\n                onOpenMobileNav={this.mobileNavHandler.bind(this, true)}\n                onLogout={this.logoutHandler}\n                isAuth={this.state.isAuth}\n              />\n            </Toolbar>\n          }\n          mobileNav={\n            <MobileNavigation\n              open={this.state.showMobileNav}\n              mobile\n              onChooseItem={this.mobileNavHandler.bind(this, false)}\n              onLogout={this.logoutHandler}\n              isAuth={this.state.isAuth}\n            />\n          }\n        />\n        {routes}\n      </Fragment>\n    );\n  }\n}\n\nexport default withRouter(App);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}